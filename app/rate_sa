<?php
error_reporting(0);
include("login_check.php");
include("config.php");
include("assets/php/quote_class.php");
include("assets/php/svg_class.php");
/*
$sql = "update uscities SET lng = '-75.51180' WHERE id = 1840144155;";
$quote->doThis($sql);
exit;
*/
/*
echo "<pre>";
print_r($_SESSION);
exit;


delete from lanes WHERE fantasy_name LIKE '%nova%';




$sql =  "DELETE FROM requested_lanes_history WHERE req_id = 1835";
$quote->doThis($sql);

*/


$sql = "SELECT region_id, region_name FROM master_regions";
$re = $quote->getThisAll($sql);

$regions = '';
foreach ($re as $v) {
    $regions .= '"' . $v->region_name . '", ';
}
$regions = substr($regions, 0, -2);

$ci = $_SESSION['customer']->customer_id;


/*
$sql = "UPDATE lanes SET  $equipment = '".$rate."' WHERE origin = $origin AND destination = $destination";
$res = $adm->doThis($sql);
*/



$sql0 = "SELECT * from requested_lanes_history WHERE user_id = $ci ORDER BY req_id DESC LIMIT 15;";
$pre = $quote->getThisAll($sql0);

$history = []; // Array to store the fetched results

foreach ($pre as $c => $v) {
    $history[] = $v;
}

/*
echo "<pre>";
print_r($history);
exit;


$sql0 = "SELECT DISTINCT(lane_id) as lane_id from requested_lanes_history WHERE user_id = $ci ORDER BY req_id DESC LIMIT 15;";
$pre = $quote->getThisAll($sql0);



foreach ($pre as $v) {
    $sql = "SELECT  fantasy_name,                  
                driving_distance, 
                equipment, 
                carrier, 
                shipper, 
                rpm_carrier, 
                rpm_shipper, 
                date_requested,
                req_id,
                lane_id,
                user_id 
        from requested_lanes_history WHERE 
            lane_id = $v->lane_id 
        AND user_id = $ci 
        AND ( driving_distance != 0 OR carrier != '$nan' OR shipper != '$nan') ;";

    $history[] = $quote->getThis1($sql);
}
*/

// $sql = 'SELECT population, CONCAT(city,", ",state_id) as city FROM uscities WHERE state_id <> "AK" AND state_id <> "HI" AND state_id <> "PR"  AND state_id <> "VI"  order by population DESC';

$sql = 'SELECT population, CONCAT(city,", ",state_id) as city FROM uscities order by population DESC';
$all_c = $quote->getThisAll($sql);

//este es ejemplo del porcentaje que se debe calcular para mostrar en search history
$sql = "SELECT *, 
((van_loads_0 - van_loads_1) / ((van_loads_0 + van_loads_1) / 2)) * 100 AS percentage,
((flat_loads_0 - flat_loads_1) / ((flat_loads_0 + flat_loads_1) / 2)) * 100 AS percentage_or FROM load_counts WHERE id = 1";
$ta = $quote->getThis1($sql);


?>
<!DOCTYPE html>
<html lang="en">
<!--begin::Head-->

<head>
    <?php include("includes/head.php"); ?>

    <link rel="stylesheet" href="assets/css/jquery.typeahead.min.css">
    <link href="assets/apex.css" rel="stylesheet" type="text/css" />


    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <style>
        .history-records:hover {
            /*border-radius: 4px;*/
            border-top: 1px solid grey;
            border-bottom: 1px solid grey !important;
            /*box-shadow: 0px 9px 4px -6px grey;*/
            background-color: var(--kt-highlight-tr);
        }
    </style>

</head>
<!--end::Head-->
<!--begin::Body-->

<body data-kt-name="good" id="kt_app_body" data-kt-app-layout="light-sidebar" data-kt-app-sidebar-enabled="true" data-kt-app-sidebar-fixed="true" data-kt-app-sidebar-push-header="true" data-kt-app-sidebar-push-toolbar="true" data-kt-app-sidebar-push-footer="true" class="app-default">
    <!--begin::Theme mode setup on page load-->
    <script>
        var defaultThemeMode = "light";
        var themeMode;
        if (document.documentElement) {
            if (document.documentElement.hasAttribute("data-theme-mode")) {
                themeMode = document.documentElement.getAttribute("data-theme-mode");
            } else {
                if (localStorage.getItem("data-theme") !== null) {
                    themeMode = localStorage.getItem("data-theme");
                } else {
                    themeMode = defaultThemeMode;
                }
            }
            if (themeMode === "system") {
                themeMode = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
            }
            document.documentElement.setAttribute("data-theme", themeMode);
        }
    </script>
    <!--end::Theme mode setup on page load-->
    <!--begin::App-->
    <div class="d-flex flex-column flex-root app-root" id="kt_app_root">
        <!--begin::Page-->
        <div class="app-page flex-column flex-column-fluid" id="kt_app_page">
            <?php include("includes/header.php"); ?>
            <!--begin::Wrapper-->
            <div class="app-wrapper flex-column flex-row-fluid" id="kt_app_wrapper">
                <!--begin::sidebar-->
                <?php include("includes/left_bar.php"); ?>
                <!--end::sidebar-->
                <!--begin::Main-->
                <div class="app-main flex-column flex-row-fluid" id="kt_app_main">
                    <!--begin::Content wrapper-->
                    <div class="d-flex flex-column flex-column-fluid">
                        <!--begin::Content-->
                        <div id="kt_app_content" class="app-content flex-column-fluid">
                            <!--begin::Content container-->
                            <div id="kt_app_content_container" class="app-container container-fluid">
                                <!-- the content -->


                                <div class="row g-5 g-xl-10">

                                    <?php
                                    for ($i = 1; $i < 4; $i++) {
                                    ?>

                                        <!--begin::Col-->
                                        <div class="col-xl-4 mb-xl-10">
                                            <!--begin::List widget 10-->
                                            <div class="card card-flush h-lg-100">
                                                <!--begin::Header-->

                                                <div class="row">
                                                    <div class="card-header pt-7">
                                                        <div class="col-12">
                                                            <!--begin::Title-->
                                                            <h3 class="card-title">
                                                                <span class="card-label fw-bold text-gray-800">Search #<?php echo $i; ?></span>
                                                            </h3>
                                                            <!--end::Title-->
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="card-header pt-7">
                                                        <div class="col-12">
                                                            <div class="typeahead__container">
                                                                <label for="exampleFormControlInput1" class="required form-label">Origin</label>
                                                                <div class="typeahead__field">
                                                                    <div class="typeahead__query">
                                                                        <input class="form-control form-control-solid js-typeahead-country_v1" id="origin_<?php echo $i; ?>" placeholder="Search" autocomplete="off">
                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-12 mt-2">
                                                            <div class="typeahead__container">
                                                                <label for="exampleFormControlInput1" class="required form-label">Destination</label>
                                                                <div class="typeahead__field">
                                                                    <div class="typeahead__query">
                                                                        <input class="form-control form-control-solid js-typeahead-country_v1" id="destination_<?php echo $i; ?>" placeholder="Search" autocomplete="off">
                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-12">
                                                            <div class="mb-10">
                                                                <label for="exampleFormControlInput1" class="required form-label">Equipment</label>
                                                                <select class="form-select" id="equipment_<?php echo $i; ?>">
                                                                    <option value="">Select</option>
                                                                    <option value="reefer">Reefer</option>
                                                                    <option value="van">Van</option>
                                                                    <option value="flat">Flatbed</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="col-12">
                                                            <div class="mb-10 text-end">
                                                                <!--button type="button" role="button" class="btn btn-primary" id="search_<?php echo $i; ?>_btn">Search
                                                                </button-->
                                                                <button type="button" role="button" class="btn btn-primary me-10" id="search_<?php echo $i; ?>_btn">
                                                                    <span class="indicator-label">
                                                                        Search
                                                                    </span>
                                                                    <span class="indicator-progress">
                                                                        Please wait... <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                                                                    </span>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--end::Header-->
                                                <!--begin::Body-->
                                                <div id="res_div_<?php echo $i; ?>" style="display:none">
                                                    <div class="card-body">
                                                        <!--begin::Nav-->
                                                        <ul class="nav nav-pills nav-pills-custom row position-relative mx-0 mb-9">
                                                            <!--begin::Item-->
                                                            <li class="nav-item col-6 mx-0 p-0">
                                                                <!--begin::Link-->
                                                                <a class="nav-link active d-flex justify-content-center w-100 border-0 h-100" data-bs-toggle="pill" href="#kt_list_widget_10_tab_1_<?php echo $i; ?>">
                                                                    <!--begin::Subtitle-->
                                                                    <div class="d-inline"><span class="nav-text text-gray-800 fw-bold fs-6 mb-3">Direct Rate
                                                                            <i class="bi bi-question-circle " data-bs-toggle="tooltip" data-bs-placement="top" title="This is the direct rate to trucks and shippers without broker fees."></i>
                                                                        </span></div>
                                                                    <!--end::Subtitle-->
                                                                    <!--begin::Bullet-->
                                                                    <span class="bullet-custom position-absolute z-index-2 bottom-0 w-100 h-4px bg-primary rounded"></span>
                                                                    <!--end::Bullet-->
                                                                </a>
                                                                <!--end::Link-->
                                                            </li>
                                                            <!--end::Item-->
                                                            <!--begin::Item-->
                                                            <li class="nav-item col-6 mx-0 px-0">
                                                                <!--begin::Link-->
                                                                <a class="nav-link d-flex justify-content-center w-100 border-0 h-100" data-bs-toggle="pill" href="#kt_list_widget_10_tab_2_<?php echo $i; ?>">
                                                                    <!--begin::Subtitle-->
                                                                    <div class="d-inline"><span class="nav-text text-gray-800 fw-bold fs-6 mb-3">Fair Value Broker Rate
                                                                            <i class="bi bi-question-circle " data-bs-toggle="tooltip" data-bs-placement="top" title="This is the rate a shipper should expect a broker to charge with their services included."></i>
                                                                        </span></div>

                                                                    <!--end::Subtitle-->
                                                                    <!--begin::Bullet-->
                                                                    <span class="bullet-custom position-absolute z-index-2 bottom-0 w-100 h-4px bg-warning rounded"></span>
                                                                    <!--end::Bullet-->
                                                                </a>
                                                                <!--end::Link-->
                                                            </li>
                                                            <!--end::Item-->

                                                            <!--begin::Bullet-->
                                                            <span class="position-absolute z-index-1 bottom-0 w-100 h-4px bg-light rounded"></span>
                                                            <!--end::Bullet-->
                                                        </ul>
                                                        <div class="tab-content">
                                                            <div class="tab-pane fade show active" id="kt_list_widget_10_tab_1_<?php echo $i; ?>">
                                                                <div class="m-0">
                                                                    <!--begin::Wrapper-->
                                                                    <div class="d-flex justify-content-center mb-3">
                                                                        <div class="d-flex align-items-center">
                                                                            <div class="flex-grow-1 me-2">
                                                                                <span class="badge bg-light-warning text-gray-800 fw-bold fs-3" id="fantasy_name_div_<?php echo $i; ?>"></span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-12">
                                                                            <div class="d-flex justify-content-center py-2">
                                                                                <span class="text-gray-800 fw-bold fs-1" id="carrier_div_<?php echo $i; ?>"></span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-12">
                                                                            <div class="d-flex justify-content-center py-2">
                                                                                <span class="fw-bold is_spotter_div_<?php echo $i; ?>"></span>
                                                                                <div class="d-inline">
                                                                                    <span data-bs-toggle="tooltip">

                                                                                        <i class="bi bi-question-circle tooltip_spot_on_<?php echo $i; ?> tooltip_spot_on_le_<?php echo $i; ?>" data-bs-toggle="tooltip" data-bs-placement="top" title="This lane has already been learned by our Spot Market, Spot On AI algorithm."></i>
                                                                                        <i class="bi bi-question-circle tooltip_spot_on_<?php echo $i; ?> tooltip_spot_on_ai_<?php echo $i; ?>" data-bs-toggle="tooltip" data-bs-placement="top" title="Select 'Request Lane' down below to add this lane. Please allow up to 24 hours for this rate to become Spot Market, Spot On!"></i>

                                                                                    </span>
                                                                                    <!--i class="bi bi-question-circle tooltip_spot_on_<?php echo $i; ?>" data-bs-toggle="tooltip" data-bs-placement="top" title=""></i-->
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-12">
                                                                            <div class="d-flex justify-content-center py-2">
                                                                                <div class="d-inline">
                                                                                    <span class="badge badge-lg badge-light-success fw-bold my-2 fs-base" id="slider_carrier_div_<?php echo $i; ?>"></span>
                                                                                    <i class="bi bi-question-circle " data-bs-toggle="tooltip" data-bs-placement="top" title="This represents the current range of rates for today, spanning from the lowest to the highest."></i>
                                                                                    </span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-12">
                                                                            <div class="d-flex justify-content-center py-2">
                                                                                <div class="d-flex align-items-baseline">
                                                                                    <span class="badge badge-light fs-base text-gray-700 px-2">24hr</span>
                                                                                    <?php
                                                                                    //segun el %en 24 hs dibuja en verde, amarillo o rojo
                                                                                    if ($ta->percentage < 0) { //red
                                                                                        $svg_icon = "danger";
                                                                                        $svg_file = "arr065";
                                                                                        $svg_textcolor = "danger";
                                                                                    } else if ($ta->percentage > 0) { //green
                                                                                        $svg_icon = "success";
                                                                                        $svg_file = "arr066";
                                                                                        $svg_textcolor = "success";
                                                                                    } else { // yellow
                                                                                        $svg_icon = "warning";
                                                                                        $svg_file = "arr090";
                                                                                        $svg_textcolor = "text-gray-700";
                                                                                    }
                                                                                    ?>
                                                                                    <!--begin::Label-->
                                                                                    <span class="badge badge-light-<?php echo $svg_icon; ?> fs-base <?php echo $svg_textcolor; ?>">
                                                                                        <!--begin::Svg Icon | path: icons/duotune/arrows/<?php echo $svg_file; ?>.svg-->
                                                                                        <?php
                                                                                        echo getSvgIcon('assets/media/icons/duotune/arrows/' . $svg_file . '.svg', 'svg-icon-2 svg-icon-' . $svg_textcolor);
                                                                                        ?>
                                                                                        <?php echo round($ta->percentage, 2); ?>
                                                                                        %
                                                                                    </span>
                                                                                    <!--end::Label-->
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="row p-5">
                                                                        <div class="col-12">
                                                                            <div class="d-flex justify-content-center p-2">
                                                                                <!--begin::Timeline-->
                                                                                <div class="timeline">
                                                                                    <!--begin::Timeline item-->
                                                                                    <div class="timeline-item align-items-center mb-7">
                                                                                        <!--begin::Timeline line-->
                                                                                        <div class="timeline-line w-40px mt-6 mb-n12"></div>
                                                                                        <!--end::Timeline line-->
                                                                                        <!--begin::Timeline icon-->
                                                                                        <div class="timeline-icon" style="margin-left: 11px">
                                                                                            <!--begin::Svg Icon | path: icons/duotune/general/gen015.svg-->
                                                                                            <span class="svg-icon svg-icon-2 svg-icon-danger">
                                                                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                                    <path opacity="0.3" d="M22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2C17.5 2 22 6.5 22 12ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10ZM6.39999 9.89999C6.99999 8.19999 8.40001 6.9 10.1 6.4C10.6 6.2 10.9 5.7 10.7 5.1C10.5 4.6 9.99999 4.3 9.39999 4.5C7.09999 5.3 5.29999 7 4.39999 9.2C4.19999 9.7 4.5 10.3 5 10.5C5.1 10.5 5.19999 10.6 5.39999 10.6C5.89999 10.5 6.19999 10.2 6.39999 9.89999ZM14.8 19.5C17 18.7 18.8 16.9 19.6 14.7C19.8 14.2 19.5 13.6 19 13.4C18.5 13.2 17.9 13.5 17.7 14C17.1 15.7 15.8 17 14.1 17.6C13.6 17.8 13.3 18.4 13.5 18.9C13.6 19.3 14 19.6 14.4 19.6C14.5 19.6 14.6 19.6 14.8 19.5Z" fill="currentColor" />
                                                                                                    <path d="M16 12C16 14.2 14.2 16 12 16C9.8 16 8 14.2 8 12C8 9.8 9.8 8 12 8C14.2 8 16 9.8 16 12ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z" fill="currentColor" />
                                                                                                </svg>
                                                                                            </span>
                                                                                            <!--end::Svg Icon-->
                                                                                        </div>
                                                                                        <!--end::Timeline icon-->
                                                                                        <!--begin::Timeline content-->
                                                                                        <div class="timeline-content m-0">
                                                                                            <!--begin::Title-->
                                                                                            <span class="fs-base fw-bold text-gray-800" id="rpm_div_<?php echo $i; ?>"></span>
                                                                                            <!--end::Title-->
                                                                                        </div>
                                                                                        <!--end::Timeline content-->
                                                                                    </div>
                                                                                    <!--end::Timeline item-->
                                                                                    <!--begin::Timeline item-->
                                                                                    <div class="timeline-item align-items-center">
                                                                                        <!--begin::Timeline line-->
                                                                                        <div class="timeline-line w-40px"></div>
                                                                                        <!--end::Timeline line-->
                                                                                        <!--begin::Timeline icon-->
                                                                                        <div class="timeline-icon" style="margin-left: 11px">
                                                                                            <!--begin::Svg Icon | path: icons/duotune/general/gen018.svg-->
                                                                                            <span class="svg-icon svg-icon-2 svg-icon-info">
                                                                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                                    <path opacity="0.3" d="M18.0624 15.3453L13.1624 20.7453C12.5624 21.4453 11.5624 21.4453 10.9624 20.7453L6.06242 15.3453C4.56242 13.6453 3.76242 11.4453 4.06242 8.94534C4.56242 5.34534 7.46242 2.44534 11.0624 2.04534C15.8624 1.54534 19.9624 5.24534 19.9624 9.94534C20.0624 12.0453 19.2624 13.9453 18.0624 15.3453Z" fill="currentColor" />
                                                                                                    <path d="M12.0624 13.0453C13.7193 13.0453 15.0624 11.7022 15.0624 10.0453C15.0624 8.38849 13.7193 7.04535 12.0624 7.04535C10.4056 7.04535 9.06241 8.38849 9.06241 10.0453C9.06241 11.7022 10.4056 13.0453 12.0624 13.0453Z" fill="currentColor" />
                                                                                                </svg>
                                                                                            </span>
                                                                                            <!--end::Svg Icon-->
                                                                                        </div>
                                                                                        <!--end::Timeline icon-->
                                                                                        <!--begin::Timeline content-->
                                                                                        <div class="timeline-content m-0">
                                                                                            <!--begin::Title-->
                                                                                            <span class="fs-base fw-bold text-gray-800" id="distance_div_<?php echo $i; ?>"></span>
                                                                                            <!--end::Title-->
                                                                                        </div>
                                                                                        <!--end::Timeline content-->
                                                                                    </div>
                                                                                    <!--end::Timeline item-->
                                                                                </div>
                                                                                <!--end::Timeline-->
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row p-2 do_you_want_div_<?php echo $i; ?>">
                                                                        <div class="col-12">
                                                                            <div class="d-flex justify-content-center">
                                                                                <button type="button" role="button" class="btn btn-primary btn-sm abre_modal_learn cual_es_<?php echo $i; ?>" id="">Request Lane</button>
                                                                                <!--div class="do_you_want_div_<?php echo $i; ?> d-inline">
                                                                                    <br><span style="cursor: pointer; display:none" class="abre_modal_learn cual_es_<?php echo $i; ?>" data-lane="">Click here to add this lane</span>
                                                                                </div-->
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row p-2">
                                                                        <div class="col-12">
                                                                            <div class="d-flex justify-content-center">
                                                                                <button type="button" role="button" class="btn btn-primary btn-sm" data-alert-fantasy="" data-alert-direct="" data-alert-broker="" data-alert-lane-id="" data-alert-lane="" id="alert_<?php echo $i; ?>_btn">Set Alert</button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row p-2">
                                                                        <div class="col-12">
                                                                            <div class="d-flex justify-content-center">
                                                                                <button type="button" role="button" class="btn btn-primary btn_enlarge btn-sm" id="btn_enlarge_<?php echo $i; ?>" data-col="<?php echo $i; ?>" data-fantasy-name="" data-last-updated="" data-rpm="" data-distance="" data-direct-quote="" data-direct-porcentaje="" data-fair-quote="" data-slider-direct="" data-slider-broker="">
                                                                                    <i class="bi bi-arrows-fullscreen"></i>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="separator separator-dashed my-6"></div>
                                                            </div>


                                                            <div class="tab-pane fade" id="kt_list_widget_10_tab_2_<?php echo $i; ?>">
                                                                <div class="m-0">
                                                                    <!--begin::Wrapper-->
                                                                    <div class="d-flex justify-content-center mb-3">
                                                                        <div class="d-flex align-items-center">
                                                                            <div class="flex-grow-1 me-2">
                                                                                <span class="badge bg-light-warning text-gray-800 fw-bold fs-4" id="fantasy_name_div_broker_<?php echo $i; ?>"></span>
                                                                            </div>
                                                                            <i class="bi bi-question-circle " data-bs-toggle="tooltip" data-bs-placement="top" title="This represents the current range of rates for today, spanning from the lowest to the highest."></i>
                                                                            <span class="badge badge-lg badge-light-success fw-bold my-2" id="slider_broker_div_<?php echo $i; ?>"></span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-12">
                                                                            <div class="d-flex justify-content-center py-2">
                                                                                <span class="text-gray-800 fw-bold  fs-1" id="broker_div_<?php echo $i; ?>"></span>
                                                                            </div>
                                                                        </div>
                                                                    </div>


                                                                    <div class="row">
                                                                        <div class="col-12">
                                                                            <div class="d-flex justify-content-center py-2">
                                                                                <span class="fw-bold is_spotter_div_<?php echo $i; ?>"></span>
                                                                                <div class="d-inline">
                                                                                    <span data-bs-toggle="tooltip">

                                                                                        <i class="bi bi-question-circle tooltip_spot_on_<?php echo $i; ?> tooltip_spot_on_le_<?php echo $i; ?>" data-bs-toggle="tooltip" data-bs-placement="top" title="This lane has already been learned by our Spot Market, Spot On AI algorithm."></i>
                                                                                        <i class="bi bi-question-circle tooltip_spot_on_<?php echo $i; ?> tooltip_spot_on_ai_<?php echo $i; ?>" data-bs-toggle="tooltip" data-bs-placement="top" title="Select 'Request Lane' down below to add this lane. Please allow up to 24 hours for this rate to become Spot Market, Spot On!"></i>

                                                                                    </span>
                                                                                    <!--i class="bi bi-question-circle tooltip_spot_on_<?php echo $i; ?>" data-bs-toggle="tooltip" data-bs-placement="top" title=""></i-->
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>




                                                                    
                                                                    <div class="row">
                                                                        <div class="col-6">
                                                                            <!--begin::Timeline-->
                                                                            <div class="timeline">
                                                                                <!--begin::Timeline item-->
                                                                                <div class="timeline-item align-items-center mb-7">
                                                                                    <!--begin::Timeline line-->
                                                                                    <div class="timeline-line w-40px mt-6 mb-n12"></div>
                                                                                    <!--end::Timeline line-->
                                                                                    <!--begin::Timeline icon-->
                                                                                    <div class="timeline-icon" style="margin-left: 11px">
                                                                                        <!--begin::Svg Icon | path: icons/duotune/general/gen015.svg-->
                                                                                        <span class="svg-icon svg-icon-2 svg-icon-danger">
                                                                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                                <path opacity="0.3" d="M22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2C17.5 2 22 6.5 22 12ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10ZM6.39999 9.89999C6.99999 8.19999 8.40001 6.9 10.1 6.4C10.6 6.2 10.9 5.7 10.7 5.1C10.5 4.6 9.99999 4.3 9.39999 4.5C7.09999 5.3 5.29999 7 4.39999 9.2C4.19999 9.7 4.5 10.3 5 10.5C5.1 10.5 5.19999 10.6 5.39999 10.6C5.89999 10.5 6.19999 10.2 6.39999 9.89999ZM14.8 19.5C17 18.7 18.8 16.9 19.6 14.7C19.8 14.2 19.5 13.6 19 13.4C18.5 13.2 17.9 13.5 17.7 14C17.1 15.7 15.8 17 14.1 17.6C13.6 17.8 13.3 18.4 13.5 18.9C13.6 19.3 14 19.6 14.4 19.6C14.5 19.6 14.6 19.6 14.8 19.5Z" fill="currentColor" />
                                                                                                <path d="M16 12C16 14.2 14.2 16 12 16C9.8 16 8 14.2 8 12C8 9.8 9.8 8 12 8C14.2 8 16 9.8 16 12ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z" fill="currentColor" />
                                                                                            </svg>
                                                                                        </span>
                                                                                        <!--end::Svg Icon-->
                                                                                    </div>
                                                                                    <!--end::Timeline icon-->
                                                                                    <!--begin::Timeline content-->
                                                                                    <div class="timeline-content m-0">
                                                                                        <!--begin::Title-->
                                                                                        <span class="fs-6 fw-bold text-gray-800" id="rpm_div_broker_<?php echo $i; ?>"></span>
                                                                                        <!--end::Title-->
                                                                                    </div>
                                                                                    <!--end::Timeline content-->
                                                                                </div>
                                                                                <!--end::Timeline item-->
                                                                                <!--begin::Timeline item-->
                                                                                <div class="timeline-item align-items-center">
                                                                                    <!--begin::Timeline line-->
                                                                                    <div class="timeline-line w-40px"></div>
                                                                                    <!--end::Timeline line-->
                                                                                    <!--begin::Timeline icon-->
                                                                                    <div class="timeline-icon" style="margin-left: 11px">
                                                                                        <!--begin::Svg Icon | path: icons/duotune/general/gen018.svg-->
                                                                                        <span class="svg-icon svg-icon-2 svg-icon-info">
                                                                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                                <path opacity="0.3" d="M18.0624 15.3453L13.1624 20.7453C12.5624 21.4453 11.5624 21.4453 10.9624 20.7453L6.06242 15.3453C4.56242 13.6453 3.76242 11.4453 4.06242 8.94534C4.56242 5.34534 7.46242 2.44534 11.0624 2.04534C15.8624 1.54534 19.9624 5.24534 19.9624 9.94534C20.0624 12.0453 19.2624 13.9453 18.0624 15.3453Z" fill="currentColor" />
                                                                                                <path d="M12.0624 13.0453C13.7193 13.0453 15.0624 11.7022 15.0624 10.0453C15.0624 8.38849 13.7193 7.04535 12.0624 7.04535C10.4056 7.04535 9.06241 8.38849 9.06241 10.0453C9.06241 11.7022 10.4056 13.0453 12.0624 13.0453Z" fill="currentColor" />
                                                                                            </svg>
                                                                                        </span>
                                                                                        <!--end::Svg Icon-->
                                                                                    </div>
                                                                                    <!--end::Timeline icon-->
                                                                                    <!--begin::Timeline content-->
                                                                                    <div class="timeline-content m-0">
                                                                                        <!--begin::Title-->
                                                                                        <span class="fs-6 fw-bold text-gray-800" id="distance_div_broker_<?php echo $i; ?>"></span>
                                                                                        <!--end::Title-->
                                                                                    </div>
                                                                                    <!--end::Timeline content-->
                                                                                </div>
                                                                                <!--end::Timeline item-->
                                                                            </div>
                                                                        </div>
                                                                        <!--end::Timeline-->
                                                                        <div class="col-6">
                                                                            <div class="row">
                                                                                <div class="col-6">
                                                                                    <span class="text-gray-800 fw-bold  fs-1" id="broker_div_<?php echo $i; ?>"></span>
                                                                                </div>
                                                                                <div class="col-6">
                                                                                    <span class="fw-bold my-2 is_spotter_div_<?php echo $i; ?>"></span>
                                                                                    <div class="d-inline">
                                                                                        <!-- <i class="bi bi-question-circle tooltip_spot_on_<?php echo $i; ?>" style="cursor:pointer" data-bs-toggle="popover" data-bs-placement="top" title="" data-bs-content=""></i> -->
                                                                                        <div class="d-inline">
                                                                                            <span data-bs-toggle="tooltip" class="tooltip_spot_on_<?php echo $i; ?>" data-bs-placement="top" title="">
                                                                                                <i class="bi bi-question-circle abre_modal_learn cual_es_<?php echo $i; ?>" data-lane=""></i>
                                                                                            </span>
                                                                                        </div>

                                                                                    </div>
                                                                                    <div class="col-6 do_you_want_div_<?php echo $i; ?> d-inline"><br><span style="cursor: pointer;" class="abre_modal_learn cual_es_<?php echo $i; ?>" data-lane="">Click here to add this lane</span></div>
                                                                                </div>
                                                                            </div>
                                                                            <?php
                                                                            //segun el %en 24 hs dibuja en verde, amarillo o rojo
                                                                            if ($ta->percentage < 0) { //red
                                                                                $svg_icon = "danger";
                                                                                $svg_file = "arr065";
                                                                                $svg_textcolor = "danger";
                                                                            } else if ($ta->percentage > 0) { //green
                                                                                $svg_icon = "success";
                                                                                $svg_file = "arr066";
                                                                                $svg_textcolor = "success";
                                                                            } else { // yellow
                                                                                $svg_icon = "warning";
                                                                                $svg_file = "arr090";
                                                                                $svg_textcolor = "text-gray-700";
                                                                            }
                                                                            ?>
                                                                            <div class="row">
                                                                                <div class="col-6">
                                                                                    <!--begin::Label-->
                                                                                    <span class="badge badge-light-<?php echo $svg_icon; ?> fs-base <?php echo $svg_textcolor; ?>">
                                                                                        <!--begin::Svg Icon | path: icons/duotune/arrows/<?php echo $svg_file; ?>.svg-->
                                                                                        <?php
                                                                                        echo getSvgIcon('assets/media/icons/duotune/arrows/' . $svg_file . '.svg', 'svg-icon-2 svg-icon-' . $svg_textcolor);
                                                                                        ?>
                                                                                        <?php echo round($ta->percentage, 2); ?>
                                                                                        %
                                                                                    </span>
                                                                                </div>
                                                                            </div>
                                                                            <!--end::Label-->
                                                                        </div>
                                                                    </div>

                                                                    <div class="row  p-5">
                                                                        <div class="col-6">
                                                                            <!-- rate alerts -->
                                                                            <button type="button" role="button" class="btn btn-primary btn-sm" data-alert-fantasy="" data-alert-direct="" data-alert-broker="" data-alert-lane-id="" data-alert-lane="" id="alert_<?php echo $i; ?>_broker_btn">
                                                                                Set Alert
                                                                            </button>
                                                                        </div>
                                                                        <div class="col-6">
                                                                            <button type="button" role="button" class="btn btn-primary btn_enlarge btn-sm" id="btn_enlarge_<?php echo $i; ?>_broker_btn" data-col="<?php echo $i; ?>" data-fantasy-name="" data-lane-id="" data-last-updated="" data-rpm="" data-distance="" data-direct-quote="" data-direct-porcentaje="" data-fair-quote="" data-slider-direct="" data-slider-broker=""><i class="bi bi-arrows-fullscreen"></i>
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="separator separator-dashed my-6"></div>
                                                            </div>
                                                        </div>
                                                        <!--begin::Item-->
                                                        <div class="m-0">

                                                            <div id="chart_div_sa_<?php echo $i; ?>">
                                                                <!-- empiezo a pegar lo del chart container -->

                                                                <!--begin::Body-->
                                                                <div class="card-body py-0 px-0">
                                                                    <!--begin::Nav-->
                                                                    <ul class="nav d-flex justify-content-between mb-3 mx-9">
                                                                        <!--begin::Item-->
                                                                        <li class="nav-item mb-3">
                                                                            <!--begin::Link-->
                                                                            <a class="nav-link btn btn-flex flex-center btn-active-danger btn-color-gray-600 btn-active-color-white rounded-2 w-45px h-35px active  cambia_chart chart_<?php echo $i; ?>" data-search-numero="<?php echo $i; ?>" data-time-range="5">5d</a>
                                                                            <!--end::Link-->
                                                                        </li>
                                                                        <!--end::Item-->
                                                                        <!--begin::Item-->
                                                                        <li class="nav-item mb-3">
                                                                            <!--begin::Link-->
                                                                            <a class="nav-link btn btn-flex flex-center btn-active-danger btn-color-gray-600 btn-active-color-white rounded-2 w-45px h-35px  cambia_chart chart_<?php echo $i; ?>" data-search-numero="<?php echo $i; ?>" data-time-range="30">1m</a>
                                                                            <!--end::Link-->
                                                                        </li>
                                                                        <!--end::Item-->
                                                                        <!--begin::Item-->
                                                                        <li class="nav-item mb-3">
                                                                            <!--begin::Link-->
                                                                            <a class="nav-link btn btn-flex flex-center btn-active-danger btn-color-gray-600 btn-active-color-white rounded-2 w-45px h-35px  cambia_chart chart_<?php echo $i; ?>" data-search-numero="<?php echo $i; ?>" data-time-range="180">6m</a>
                                                                            <!--end::Link-->
                                                                        </li>
                                                                        <!--end::Item-->
                                                                        <!--begin::Item-->
                                                                        <li class="nav-item mb-3">
                                                                            <!--begin::Link-->
                                                                            <a class="nav-link btn btn-flex flex-center btn-active-danger btn-color-gray-600 btn-active-color-white rounded-2 w-45px h-35px  cambia_chart chart_<?php echo $i; ?>" data-search-numero="<?php echo $i; ?>" data-time-range="365">1y</a>
                                                                            <!--end::Link-->
                                                                        </li>
                                                                        <!--end::Item-->
                                                                    </ul>
                                                                    <!--end::Nav-->
                                                                    <!--begin::Tab Content-->
                                                                    <div class="tab-content mt-n6">
                                                                        <!--begin::Tap pane-->
                                                                        <div class="tab-pane fade active show">
                                                                            <!--begin::Chart-->
                                                                            <div id="chart_search_result_<?php echo $i; ?>" data-kt-chart-color="primary" style="height: 200px;" class="min-h-auto h-200px ps-3 pe-6"></div>
                                                                            <!--end::Chart-->
                                                                        </div>
                                                                        <!--end::Tap pane-->

                                                                    </div>
                                                                    <!--end::Tab Content-->
                                                                </div>
                                                                <!--end::Body-->

                                                                <!-- el chart container -->
                                                            </div>
                                                        </div>
                                                        <!--end::Item-->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- end col -->
                                    <?php
                                    }
                                    ?>
                                    <div class="modal fade" tabindex="-1" id="alert_modal">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h3 class="modal-title">Set alert</h3>
                                                    <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                                                        <span class="svg-icon svg-icon-1"></span>
                                                    </div>
                                                </div>
                                                <div class="modal-body">

                                                    <div class="mb-0">
                                                        <div class="pt-5">

                                                            <label class="form-label">An alert will be activated when the
                                                                spot market rate experiences a change either above or below
                                                                the specified amount.</label>
                                                            <!--begin::Dialer-->
                                                            <div class="input-group w-md-300px justify-content-center" data-kt-dialer="true" data-kt-dialer-min="100" data-kt-dialer-max="3000" data-kt-dialer-step="100" data-kt-dialer-prefix="$">

                                                                <!--begin::Decrease control-->
                                                                <button class="btn btn-icon btn-outline btn-active-color-primary" type="button" data-kt-dialer-control="decrease">
                                                                    <i class="bi bi-dash fs-1"></i>
                                                                </button>
                                                                <!--end::Decrease control-->

                                                                <!--begin::Input control-->
                                                                <input type="text" id="alert_valor" class="form-control" readonly placeholder="Amount" value="$300" data-kt-dialer-control="input" />
                                                                <!--end::Input control-->

                                                                <!--begin::Increase control-->
                                                                <button class="btn btn-icon btn-outline btn-active-color-primary" type="button" data-kt-dialer-control="increase">
                                                                    <i class="bi bi-plus fs-1"></i>
                                                                </button>
                                                                <!--end::Increase control-->
                                                            </div>
                                                            <!--end::Dialer-->
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>If you want to get an email on this alert, please set it here.</label>
                                                                        <input class="form-control" type="email" name="alert_email" id="alert_email">
                                                                        <input class="form-control" type="hidden" name="alert_direct" id="alert_direct">
                                                                        <input class="form-control" type="hidden" name="alert_broker" id="alert_broker">
                                                                        <input class="form-control" type="hidden" name="alert_fantasy" id="alert_fantasy">
                                                                        <input class="form-control" type="hidden" name="alert_lane_id" id="alert_lane_id">

                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">
                                                        Close
                                                    </button>
                                                    <button type="button" class="btn btn-primary set_alert_btn" id="">
                                                        Confirm Alert
                                                    </button>
                                                    <input type="hidden" id="btn_tocado">
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="modal fade" tabindex="-1" id="chart_modal">
                                        <div class="modal-dialog modal-xl">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h3 class="modal-title">Search Result</h3>
                                                    <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                                                        <span class="svg-icon svg-icon-1"></span>
                                                    </div>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="card-body">
                                                        <!--begin::Nav-->
                                                        <ul class="nav nav-pills nav-pills-custom row position-relative mx-0 mb-9">
                                                            <!--begin::Item-->
                                                            <li class="nav-item col-6 mx-0 p-0">
                                                                <!--begin::Link-->
                                                                <a class="nav-link active d-flex justify-content-center w-100 border-0 h-100" data-bs-toggle="pill" href="#kt_list_widget_10_tab_1_5">
                                                                    <!--begin::Subtitle-->
                                                                    <span class="nav-text text-gray-800 fw-bold fs-6 mb-3">Direct Rate</span>
                                                                    <!--end::Subtitle-->
                                                                    <!--begin::Bullet-->
                                                                    <span class="bullet-custom position-absolute z-index-2 bottom-0 w-100 h-4px bg-primary rounded"></span>
                                                                    <!--end::Bullet-->
                                                                </a>
                                                                <!--end::Link-->
                                                            </li>
                                                            <!--end::Item-->
                                                            <!--begin::Item-->
                                                            <li class="nav-item col-6 mx-0 px-0">
                                                                <!--begin::Link-->
                                                                <a class="nav-link d-flex justify-content-center w-100 border-0 h-100" data-bs-toggle="pill" href="#kt_list_widget_10_tab_2_5">
                                                                    <!--begin::Subtitle-->
                                                                    <span class="nav-text text-gray-800 fw-bold fs-6 mb-3">Fair Value Broker Rate</span>
                                                                    <!--end::Subtitle-->
                                                                    <!--begin::Bullet-->
                                                                    <span class="bullet-custom position-absolute z-index-2 bottom-0 w-100 h-4px bg-warning rounded"></span>
                                                                    <!--end::Bullet-->
                                                                </a>
                                                                <!--end::Link-->
                                                            </li>
                                                            <!--end::Item-->

                                                            <!--begin::Bullet-->
                                                            <span class="position-absolute z-index-1 bottom-0 w-100 h-4px bg-light rounded"></span>
                                                            <!--end::Bullet-->
                                                        </ul>
                                                        <div class="tab-content">
                                                            <div class="tab-pane fade show active" id="kt_list_widget_10_tab_1_5">
                                                                <div class="m-0">
                                                                    <!--begin::Wrapper-->
                                                                    <div class="d-flex align-items-sm-center mb-5">
                                                                        <div class="d-flex align-items-center flex-row-fluid flex-wrap">
                                                                            <div class="flex-grow-1 me-2">
                                                                                <span class="badge bg-light-warning text-gray-800 fw-bold fs-4" id="fantasy_name_div_5"></span>
                                                                            </div>
                                                                            <!-- <span class="badge badge-lg badge-light-success fw-bold my-2" id="last_updated_div_5"></span> -->
                                                                            <span class="badge badge-lg badge-light-success fw-bold my-2" id="modal_slider_direct_div">este direct</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-6">
                                                                            <!--begin::Timeline-->
                                                                            <div class="timeline">
                                                                                <!--begin::Timeline item-->
                                                                                <div class="timeline-item align-items-center mb-7">
                                                                                    <!--begin::Timeline line-->
                                                                                    <div class="timeline-line w-40px mt-6 mb-n12"></div>
                                                                                    <!--end::Timeline line-->
                                                                                    <!--begin::Timeline icon-->
                                                                                    <div class="timeline-icon" style="margin-left: 11px">
                                                                                        <!--begin::Svg Icon | path: icons/duotune/general/gen015.svg-->
                                                                                        <span class="svg-icon svg-icon-2 svg-icon-danger">
                                                                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                                <path opacity="0.3" d="M22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2C17.5 2 22 6.5 22 12ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10ZM6.39999 9.89999C6.99999 8.19999 8.40001 6.9 10.1 6.4C10.6 6.2 10.9 5.7 10.7 5.1C10.5 4.6 9.99999 4.3 9.39999 4.5C7.09999 5.3 5.29999 7 4.39999 9.2C4.19999 9.7 4.5 10.3 5 10.5C5.1 10.5 5.19999 10.6 5.39999 10.6C5.89999 10.5 6.19999 10.2 6.39999 9.89999ZM14.8 19.5C17 18.7 18.8 16.9 19.6 14.7C19.8 14.2 19.5 13.6 19 13.4C18.5 13.2 17.9 13.5 17.7 14C17.1 15.7 15.8 17 14.1 17.6C13.6 17.8 13.3 18.4 13.5 18.9C13.6 19.3 14 19.6 14.4 19.6C14.5 19.6 14.6 19.6 14.8 19.5Z" fill="currentColor" />
                                                                                                <path d="M16 12C16 14.2 14.2 16 12 16C9.8 16 8 14.2 8 12C8 9.8 9.8 8 12 8C14.2 8 16 9.8 16 12ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z" fill="currentColor" />
                                                                                            </svg>
                                                                                        </span>
                                                                                        <!--end::Svg Icon-->
                                                                                    </div>
                                                                                    <!--end::Timeline icon-->
                                                                                    <!--begin::Timeline content-->
                                                                                    <div class="timeline-content m-0">
                                                                                        <!--begin::Title-->
                                                                                        <span class="fs-6 fw-bold text-gray-800" id="rpm_div_5"></span>
                                                                                        <!--end::Title-->
                                                                                    </div>
                                                                                    <!--end::Timeline content-->
                                                                                </div>
                                                                                <!--end::Timeline item-->
                                                                                <!--begin::Timeline item-->
                                                                                <div class="timeline-item align-items-center">
                                                                                    <!--begin::Timeline line-->
                                                                                    <div class="timeline-line w-40px"></div>
                                                                                    <!--end::Timeline line-->
                                                                                    <!--begin::Timeline icon-->
                                                                                    <div class="timeline-icon" style="margin-left: 11px">
                                                                                        <!--begin::Svg Icon | path: icons/duotune/general/gen018.svg-->
                                                                                        <span class="svg-icon svg-icon-2 svg-icon-info">
                                                                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                                <path opacity="0.3" d="M18.0624 15.3453L13.1624 20.7453C12.5624 21.4453 11.5624 21.4453 10.9624 20.7453L6.06242 15.3453C4.56242 13.6453 3.76242 11.4453 4.06242 8.94534C4.56242 5.34534 7.46242 2.44534 11.0624 2.04534C15.8624 1.54534 19.9624 5.24534 19.9624 9.94534C20.0624 12.0453 19.2624 13.9453 18.0624 15.3453Z" fill="currentColor" />
                                                                                                <path d="M12.0624 13.0453C13.7193 13.0453 15.0624 11.7022 15.0624 10.0453C15.0624 8.38849 13.7193 7.04535 12.0624 7.04535C10.4056 7.04535 9.06241 8.38849 9.06241 10.0453C9.06241 11.7022 10.4056 13.0453 12.0624 13.0453Z" fill="currentColor" />
                                                                                            </svg>
                                                                                        </span>
                                                                                        <!--end::Svg Icon-->
                                                                                    </div>
                                                                                    <!--end::Timeline icon-->
                                                                                    <!--begin::Timeline content-->
                                                                                    <div class="timeline-content m-0">
                                                                                        <!--begin::Title-->
                                                                                        <span class="fs-6 fw-bold text-gray-800" id="distance_div_5"></span>
                                                                                        <!--end::Title-->
                                                                                    </div>
                                                                                    <!--end::Timeline content-->
                                                                                </div>
                                                                                <!--end::Timeline item-->
                                                                            </div>
                                                                        </div>
                                                                        <!--end::Timeline-->
                                                                        <div class="col-6">
                                                                            <span class="text-gray-800 fw-bold d-block fs-1" id="carrier_div_5"></span>
                                                                            <?php
                                                                            //segun el %en 24 hs dibuja en verde, amarillo o rojo
                                                                            if ($ta->percentage < 0) { //red
                                                                                $svg_icon = "danger";
                                                                                $svg_file = "arr065";
                                                                                $svg_textcolor = "danger";
                                                                            } else if ($ta->percentage > 0) { //green
                                                                                $svg_icon = "success";
                                                                                $svg_file = "arr066";
                                                                                $svg_textcolor = "success";
                                                                            } else { // yellow
                                                                                $svg_icon = "warning";
                                                                                $svg_file = "arr090";
                                                                                $svg_textcolor = "text-gray-700";
                                                                            }
                                                                            ?>
                                                                            <!--begin::Label-->
                                                                            <span class="badge badge-light-<?php echo $svg_icon; ?> fs-base <?php echo $svg_textcolor; ?>">
                                                                                <!--begin::Svg Icon | path: icons/duotune/arrows/<?php echo $svg_file; ?>.svg-->
                                                                                <?php
                                                                                echo getSvgIcon('assets/media/icons/duotune/arrows/' . $svg_file . '.svg', 'svg-icon-2 svg-icon-' . $svg_textcolor);
                                                                                ?>
                                                                                <?php echo round($ta->percentage, 2); ?>
                                                                                %
                                                                            </span>
                                                                            <!--end::Label-->
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                                <div class="separator separator-dashed my-6"></div>
                                                            </div>
                                                            <div class="tab-pane fade" id="kt_list_widget_10_tab_2_5">
                                                                <div class="m-0">
                                                                    <!--begin::Wrapper-->
                                                                    <div class="d-flex align-items-sm-center mb-5">
                                                                        <div class="d-flex align-items-center flex-row-fluid flex-wrap">
                                                                            <div class="flex-grow-1 me-2">
                                                                                <span class="badge bg-light-warning text-gray-800 fw-bold fs-4" id="fantasy_name_div_broker_5"></span>
                                                                            </div>
                                                                            <!--   <span class="badge badge-lg badge-light-success fw-bold my-2" id="last_updated_div_broker_5"></span> -->
                                                                            <span class="badge badge-lg badge-light-success fw-bold my-2" id="modal_slider_fair_div"></span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-6">
                                                                            <!--begin::Timeline-->
                                                                            <div class="timeline">
                                                                                <!--begin::Timeline item-->
                                                                                <div class="timeline-item align-items-center mb-7">
                                                                                    <!--begin::Timeline line-->
                                                                                    <div class="timeline-line w-40px mt-6 mb-n12"></div>
                                                                                    <!--end::Timeline line-->
                                                                                    <!--begin::Timeline icon-->
                                                                                    <div class="timeline-icon" style="margin-left: 11px">
                                                                                        <!--begin::Svg Icon | path: icons/duotune/general/gen015.svg-->
                                                                                        <span class="svg-icon svg-icon-2 svg-icon-danger">
                                                                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                                <path opacity="0.3" d="M22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2C17.5 2 22 6.5 22 12ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10ZM6.39999 9.89999C6.99999 8.19999 8.40001 6.9 10.1 6.4C10.6 6.2 10.9 5.7 10.7 5.1C10.5 4.6 9.99999 4.3 9.39999 4.5C7.09999 5.3 5.29999 7 4.39999 9.2C4.19999 9.7 4.5 10.3 5 10.5C5.1 10.5 5.19999 10.6 5.39999 10.6C5.89999 10.5 6.19999 10.2 6.39999 9.89999ZM14.8 19.5C17 18.7 18.8 16.9 19.6 14.7C19.8 14.2 19.5 13.6 19 13.4C18.5 13.2 17.9 13.5 17.7 14C17.1 15.7 15.8 17 14.1 17.6C13.6 17.8 13.3 18.4 13.5 18.9C13.6 19.3 14 19.6 14.4 19.6C14.5 19.6 14.6 19.6 14.8 19.5Z" fill="currentColor" />
                                                                                                <path d="M16 12C16 14.2 14.2 16 12 16C9.8 16 8 14.2 8 12C8 9.8 9.8 8 12 8C14.2 8 16 9.8 16 12ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z" fill="currentColor" />
                                                                                            </svg>
                                                                                        </span>
                                                                                        <!--end::Svg Icon-->
                                                                                    </div>
                                                                                    <!--end::Timeline icon-->
                                                                                    <!--begin::Timeline content-->
                                                                                    <div class="timeline-content m-0">
                                                                                        <!--begin::Title-->
                                                                                        <span class="fs-6 fw-bold text-gray-800" id="rpm_div_broker_5"></span>
                                                                                        <!--end::Title-->
                                                                                    </div>
                                                                                    <!--end::Timeline content-->
                                                                                </div>
                                                                                <!--end::Timeline item-->
                                                                                <!--begin::Timeline item-->
                                                                                <div class="timeline-item align-items-center">
                                                                                    <!--begin::Timeline line-->
                                                                                    <div class="timeline-line w-40px"></div>
                                                                                    <!--end::Timeline line-->
                                                                                    <!--begin::Timeline icon-->
                                                                                    <div class="timeline-icon" style="margin-left: 11px">
                                                                                        <!--begin::Svg Icon | path: icons/duotune/general/gen018.svg-->
                                                                                        <span class="svg-icon svg-icon-2 svg-icon-info">
                                                                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                                <path opacity="0.3" d="M18.0624 15.3453L13.1624 20.7453C12.5624 21.4453 11.5624 21.4453 10.9624 20.7453L6.06242 15.3453C4.56242 13.6453 3.76242 11.4453 4.06242 8.94534C4.56242 5.34534 7.46242 2.44534 11.0624 2.04534C15.8624 1.54534 19.9624 5.24534 19.9624 9.94534C20.0624 12.0453 19.2624 13.9453 18.0624 15.3453Z" fill="currentColor" />
                                                                                                <path d="M12.0624 13.0453C13.7193 13.0453 15.0624 11.7022 15.0624 10.0453C15.0624 8.38849 13.7193 7.04535 12.0624 7.04535C10.4056 7.04535 9.06241 8.38849 9.06241 10.0453C9.06241 11.7022 10.4056 13.0453 12.0624 13.0453Z" fill="currentColor" />
                                                                                            </svg>
                                                                                        </span>
                                                                                        <!--end::Svg Icon-->
                                                                                    </div>
                                                                                    <!--end::Timeline icon-->
                                                                                    <!--begin::Timeline content-->
                                                                                    <div class="timeline-content m-0">
                                                                                        <!--begin::Title-->
                                                                                        <span class="fs-6 fw-bold text-gray-800" id="distance_div_broker_5"></span>
                                                                                        <!--end::Title-->
                                                                                    </div>
                                                                                    <!--end::Timeline content-->
                                                                                </div>
                                                                                <!--end::Timeline item-->
                                                                            </div>
                                                                        </div>
                                                                        <!--end::Timeline-->
                                                                        <div class="col-6">
                                                                            <span class="text-gray-800 fw-bold d-block fs-1" id="carrier_div_broker_5"></span>
                                                                            <?php
                                                                            //segun el %en 24 hs dibuja en verde, amarillo o rojo
                                                                            if ($ta->percentage < 0) { //red
                                                                                $svg_icon = "danger";
                                                                                $svg_file = "arr065";
                                                                                $svg_textcolor = "danger";
                                                                            } else if ($ta->percentage > 0) { //green
                                                                                $svg_icon = "success";
                                                                                $svg_file = "arr066";
                                                                                $svg_textcolor = "success";
                                                                            } else { // yellow
                                                                                $svg_icon = "warning";
                                                                                $svg_file = "arr090";
                                                                                $svg_textcolor = "text-gray-700";
                                                                            }
                                                                            ?>
                                                                            <!--begin::Label-->
                                                                            <span class="badge badge-light-<?php echo $svg_icon; ?> fs-base  <?php echo $svg_textcolor; ?>">
                                                                                <!--begin::Svg Icon | path: icons/duotune/arrows/<?php echo $svg_file; ?>.svg-->
                                                                                <?php
                                                                                echo getSvgIcon('assets/media/icons/duotune/arrows/' . $svg_file . '.svg', 'svg-icon-2 svg-icon-' . $svg_textcolor);
                                                                                ?>
                                                                                <?php echo round($ta->percentage, 2); ?>
                                                                                %
                                                                            </span>
                                                                            <!--end::Label-->
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                                <div class="separator separator-dashed my-6"></div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="m-0">
                                                        <!-- empiezo a pegar lo del chart container -->

                                                        <!--begin::Body-->
                                                        <div class="card-body py-0 px-0">
                                                            <!--begin::Nav-->
                                                            <ul class="nav d-flex justify-content-between mb-3 mx-9">
                                                                <!--begin::Item-->
                                                                <li class="nav-item mb-3">
                                                                    <!--begin::Link-->
                                                                    <a class="nav-link btn btn-flex flex-center btn-active-danger btn-color-gray-600 btn-active-color-white rounded-2 w-45px h-35px active  cambia_chart_modal chart_4 mod_5" data-search-numero="4" data-time-range="5">5d</a>
                                                                    <!--end::Link-->
                                                                </li>
                                                                <!--end::Item-->
                                                                <!--begin::Item-->
                                                                <li class="nav-item mb-3">
                                                                    <!--begin::Link-->
                                                                    <a class="nav-link btn btn-flex flex-center btn-active-danger btn-color-gray-600 btn-active-color-white rounded-2 w-45px h-35px  cambia_chart_modal chart_4 mod_30" data-search-numero="4" data-time-range="30">1m</a>
                                                                    <!--end::Link-->
                                                                </li>
                                                                <!--end::Item-->
                                                                <!--begin::Item-->
                                                                <li class="nav-item mb-3">
                                                                    <!--begin::Link-->
                                                                    <a class="nav-link btn btn-flex flex-center btn-active-danger btn-color-gray-600 btn-active-color-white rounded-2 w-45px h-35px  cambia_chart_modal chart_4 mod_180" data-search-numero="4" data-time-range="180">6m</a>
                                                                    <!--end::Link-->
                                                                </li>
                                                                <!--end::Item-->
                                                                <!--begin::Item-->
                                                                <li class="nav-item mb-3">
                                                                    <!--begin::Link-->
                                                                    <a class="nav-link btn btn-flex flex-center btn-active-danger btn-color-gray-600 btn-active-color-white rounded-2 w-45px h-35px  cambia_chart_modal chart_4 mod_365" data-search-numero="4" data-time-range="365">1y</a>
                                                                    <!--end::Link-->
                                                                </li>
                                                                <!--end::Item-->
                                                            </ul>
                                                            <!--end::Nav-->
                                                            <!--begin::Tab Content-->
                                                            <div class="tab-content mt-n6">
                                                                <!--begin::Tap pane-->
                                                                <div class="tab-pane fade active show">
                                                                    <!--begin::Chart-->
                                                                    <div id="chart_search_result_4" data-kt-chart-color="primary" style="height: 280px" class="ps-3 pe-6"></div>
                                                                    <!--end::Chart-->
                                                                </div>
                                                                <!--end::Tap pane-->
                                                            </div>
                                                            <!--end::Tab Content-->
                                                        </div>
                                                        <!--end::Body-->

                                                        <!-- el chart container -->

                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">
                                                        Close
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                </div>


                                <div class="row g-5 g-xl-10 mt-2">
                                    <div class="col">
                                        <span class="text-gray-800 fw-bold d-block fs-1 pb-2">Search History</span>
                                    </div>
                                </div>
                                <div class=" row g-5 g-xl-10">
                                    <!--begin::Col search history-->
                                    <div class="col-md-12 mb-xl-10">
                                        <!--begin::List widget 8-->
                                        <div class="card card-flush h-lg-100">
                                            <!--begin::Header>
                                        <div class="card-header">
                                            <h3 class="card-title align-items-start flex-column">
                                                <span class="card-label fw-bold text-gray-800">Title</span>
                                            </h3>
                                        </div>
                                        <!--end::Header-->
                                            <!--begin::Body-->
                                            <div class="card-body pt-2">
                                                <div id="search_history_div">
                                                    <?php
                                                    if (empty($history)) {
                                                    } else {
                                                        foreach ($history as $v) {

                                                            if ((int)$v->driving_distance === 0 || $v->carrier === "$nan" || $v->shipper === "$nan") {
                                                            } else {

                                                                $valor_actual2 = str_replace("$", "", $v->carrier);
                                                                $valor_actual = str_replace(",", "", $valor_actual2);

                                                                $sql = "SELECT $v->equipment as valor_previo FROM lanes_historic WHERE lane_id = $v->lane_id ORDER BY last_updated DESC LIMIT 1";
                                                                $pr = $quote->getThis1($sql);
                                                                $valor_previo = $pr->valor_previo;
                                                                $change = round((($valor_actual - $valor_previo) / $valor_previo * 100), 2);
                                                    ?>
                                                                <div class="row my-1 history-records">
                                                                    <div class="col-md-3">
                                                                        <div class="d-flex align-items-sm-center mb-1">
                                                                            <div class="d-flex align-items-center flex-row-fluid flex-wrap">
                                                                                <div class="me-2">
                                                                                    <span class="text-primary fw-bold d-block fs-4" id=""><?php echo $v->fantasy_name; ?></span>
                                                                                </div>
                                                                                <span class="badge badge-lg badge-light-success fw-bold my-2" id=""></span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-1">
                                                                        <div class="d-flex align-items-sm-center mb-1">
                                                                            <div class="d-flex align-items-center flex-row-fluid flex-wrap">
                                                                                <div class="flex-grow-1 me-2">
                                                                                    <span class="text-gray-800 d-block fs-6 align-middle" id=""><?php echo $v->equipment; ?></span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-2">
                                                                        <div class="timeline">
                                                                            <div class="timeline-item align-items-center mb-1">


                                                                                <div class="timeline-content m-0">
                                                                                    <span class="fs-6 fw-bold text-gray-800" id="rpm_div_broker_">RPM <?php echo $v->rpm_shipper; ?></span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="timeline-item align-items-center">


                                                                                <div class="timeline-content m-0">
                                                                                    <span class="fs-6 fw-bold text-gray-800" id="distance_div_broker_">DIST <?php echo round($v->driving_distance, 2); ?> mi</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-2">
                                                                        Direct Rate:<span class="text-gray-800 fw-bold d-block fs-1"> <?php echo $v->carrier; ?></span>
                                                                    </div>
                                                                    <div class="col-md-2">
                                                                        Broker Rate:<span class="text-gray-800 fw-bold d-block fs-1"> <?php echo $v->shipper; ?></span>
                                                                    </div>
                                                                    <div class="col-md-2 d-flex flex-column flex-center">
                                                                        <div class="px-2">
                                                                            <span class="fw-bold text-gray-800 ">24hr</span>
                                                                        </div>
                                                                        <?php
                                                                        //segun el %en 24 hs dibuja en verde, amarillo o rojo
                                                                        if ($change < 0) { //red
                                                                            $svg_icon = "danger";
                                                                            $svg_file = "arr065";
                                                                            $svg_textcolor = "danger";
                                                                        ?>
                                                                            <div class="px-2">
                                                                                <!--begin::Label-->
                                                                                <span class="badge badge-light-<?php echo $svg_icon; ?> fs-base <?php echo $svg_textcolor; ?>">
                                                                                    <!--begin::Svg Icon | path: icons/duotune/arrows/<?php echo $svg_file; ?>.svg-->
                                                                                    <?php
                                                                                    echo getSvgIcon('assets/media/icons/duotune/arrows/' . $svg_file . '.svg', 'svg-icon-2 svg-icon-' . $svg_textcolor);
                                                                                    ?>
                                                                                    <?php echo $change; ?>
                                                                                    %
                                                                                </span>
                                                                                <!--end::Label-->
                                                                            </div>
                                                                        <?php
                                                                        } else if ($change > 0) { //green
                                                                            $svg_icon = "success";
                                                                            $svg_file = "arr066";
                                                                            $svg_textcolor = "success";
                                                                        ?>
                                                                            <div class="px-2">
                                                                                <!--begin::Label-->
                                                                                <span class="badge badge-light-<?php echo $svg_icon; ?> fs-base <?php echo $svg_textcolor; ?>">
                                                                                    <!--begin::Svg Icon | path: icons/duotune/arrows/<?php echo $svg_file; ?>.svg-->
                                                                                    <?php
                                                                                    echo getSvgIcon('assets/media/icons/duotune/arrows/' . $svg_file . '.svg', 'svg-icon-2 svg-icon-' . $svg_textcolor);
                                                                                    ?>
                                                                                    <?php echo $change; ?>
                                                                                    %
                                                                                </span>
                                                                                <!--end::Label-->
                                                                            </div>
                                                                        <?php
                                                                        } else { // yellow
                                                                            $svg_icon = "warning";
                                                                            $svg_file = "arr090";
                                                                            $svg_textcolor = "text-gray-700";
                                                                        ?>
                                                                            <div class="px-2">
                                                                                <!--begin::Label-->
                                                                                <span class="badge badge-light-<?php echo $svg_icon; ?> fs-base <?php echo $svg_textcolor; ?>">
                                                                                    <!--begin::Svg Icon | path: icons/duotune/arrows/<?php echo $svg_file; ?>.svg-->
                                                                                    <?php
                                                                                    echo getSvgIcon('assets/media/icons/duotune/arrows/' . $svg_file . '.svg', 'svg-icon-2 svg-icon-' . $svg_textcolor);
                                                                                    ?>

                                                                                </span>
                                                                                <!--end::Label-->
                                                                            </div>
                                                                        <?php
                                                                        }
                                                                        ?>
                                                                    </div>
                                                                </div>
                                                                <div class="separator separator-dashed my-2"></div>
                                                    <?php
                                                            }
                                                        }
                                                    }
                                                    ?>
                                                </div>

                                            </div>
                                            <!--end::Body-->
                                        </div>
                                        <!--end::LIst widget 8-->
                                    </div>
                                    <!--end::Col-->
                                </div>


                                <!--div class="row g-5 g-xl-10 mt-3">
                                    <?php
                                    foreach ($history as $v) {
                                    ?>
                                    
                                    <?php
                                    }
                                    ?>
                                </div-->


                                <!-- the content -->
                            </div>
                            <!--end::Content container-->
                        </div>
                        <!--end::Content-->
                    </div>
                    <!--end::Content wrapper-->
                    <!--begin::Footer-->
                    <?php include("includes/footer.php"); ?>
                    <!--end::Footer-->
                </div>
                <!--end:::Main-->
            </div>
            <!--end::Wrapper-->
        </div>
        <!--end::Page-->
    </div>
    <!--end::App-->
    <!--begin::Drawers-->


    <div id="kt_scrolltop" class="scrolltop" data-kt-scrolltop="true">
        <!--begin::Svg Icon | path: icons/duotune/arrows/arr066.svg-->
        <span class="svg-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect opacity="0.5" x="13" y="6" width="13" height="2" rx="1" transform="rotate(90 13 6)" fill="currentColor" />
                <path d="M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z" fill="currentColor" />
            </svg>
        </span>
        <!--end::Svg Icon-->
    </div>
    <!--end::Scrolltop-->


    <div class="modal fade" tabindex="-1" id="learn_lane">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Do you want to have our AI learn this lane?</h3>
                    <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                        <span class="svg-icon svg-icon-1"></span>
                    </div>
                </div>
                <div class="modal-body">

                    <div class="mb-0">
                        <div class="pt-5">
                            <label class="form-label">
                                Once this lane transitions to Spot Market, Spot ON- we will notify you via email. Our advanced software ensures 100% accuracy in identifying this lane permanently. During the learning phase, please allow up to 24 hours for the system to acquire complete proficiency.
                            </label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            You have <p id="cuantos_quedan_p" style="display:inline;"></p> out of 50 lanes remaining.
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">
                        Cancel
                    </button>
                    <button type="button" class="btn btn-primary" data-lane="" id="confirma_aprender">
                        Confirm
                    </button>
                </div>
            </div>
        </div>
    </div>


    <!--begin::Javascript-->

    <script>
        var hostUrl = "assets/";
    </script>
    <!--begin::Global Javascript Bundle(used by all pages)-->
    <script src="assets/plugins/global/plugins.bundle.js"></script>
    <script src="assets/js/scripts.bundle.js"></script>
    <script src="assets/js/lanerunner.js"></script>
    <!--end::Global Javascript Bundle-->


    <!--begin::Vendors Javascript(used by this page)-->
    <script src="assets/plugins/custom/datatables/datatables.bundle.js"></script>
    <script src="assets/plugins/custom/vis-timeline/vis-timeline.bundle.js"></script>

    <!--end::Vendors Javascript-->


    <!--begin::Custom Javascript(used by this page)-->
    <script src="assets/js/widgets.bundle.js"></script>
    <script src="assets/js/custom/widgets.js"></script>
    <script src="assets/js/jquery.typeahead.min.js"></script>


    <!--end::Javascript-->


    <script type="text/javascript">
        const modal_mirando_chart = {
            cual: 0
        }

        const cuantas = {
            quedan: <?php echo $_SESSION['want_to_learn']; ?>
        }

        $("#confirma_aprender").on('click', function() {

            let cual_f_lane = $(this).data('lane')

            $.ajax({
                url: 'ajax/confirma_aprender.php?lane=' + cual_f_lane,
                dataType: 'json',
                success: function(data) {
                    cuantas.quedan = parseInt(cuantas.quedan) - 1
                    $("#learn_lane").modal('hide')
                    // console.log(cuantas.quedan)

                },
                error: function() {
                    alert('Please refresh page.');
                }
            });


        })


        $(".abre_modal_learn").on('click', function() {

            $("#cuantos_quedan_p").text(cuantas.quedan)

            let que_lane = $(this).data('lane');
            $("#confirma_aprender").data('lane', que_lane)
            $("#learn_lane").modal('show')
        })

        $(".btn_enlarge").on('click', function() {
            $('.chart_4').removeClass('active');
            $('.mod_5').addClass('active');
            var columna_modal = parseInt($(this).attr('data-col'))
            modal_mirando_chart.cual = parseInt(columna_modal)
            chart_modal(5)

            var fantasy_name = $("#btn_enlarge_" + columna_modal).attr('data-fantasy-name');
            var rpm_carrier = $("#btn_enlarge_" + columna_modal).attr('data-rpm');
            var distance = $("#btn_enlarge_" + columna_modal).attr('data-distance');
            var direct_quote = $("#btn_enlarge_" + columna_modal).attr('data-direct-quote');
            var direct_porcentaje = $("#btn_enlarge_" + columna_modal).attr('data-direct-porcentaje');
            var fair_quote = $("#btn_enlarge_" + columna_modal).attr('data-fair-quote');
            var slider_direct = $("#btn_enlarge_" + columna_modal).attr('data-slider-direct');
            var slider_broker = $("#btn_enlarge_" + columna_modal).attr('data-slider-broker');






            $("#modal_slider_direct_div").text(slider_direct)
            $("#modal_slider_fair_div").text(slider_broker)

            $("#fantasy_name_div_5").text(fantasy_name)

            $("#rpm_div_5").text(rpm_carrier + "/mi")
            $("#distance_div_5").text(distance + " mi")
            $("#carrier_div_5").text(direct_quote)

            $("#last_updated_div_broker_5").text('Last updated 45 min ago')
            $("#fantasy_name_div_broker_5").text(fantasy_name)
            $("#rpm_div_broker_5").text(rpm_carrier + "/mi")
            $("#distance_div_broker_5").text(distance + " mi")
            $("#carrier_div_broker_5").text(fair_quote)


            $("#chart_modal").modal('show')
        })

        $(".cambia_chart_modal").on('click', function() {
            var rango_busca = parseInt($(this).attr('data-time-range'))
            $('.chart_4').removeClass('active');
            $(this).addClass('active');
            chart_modal(rango_busca)
        })


        $(".cambia_chart").on('click', function() {
            var columna = parseInt($(this).attr('data-search-numero'))
            var rango_busca = parseInt($(this).attr('data-time-range'))
            $('.chart_' + columna).removeClass('active');
            $(this).addClass('active');
            actualizo_chart(columna, rango_busca)
        })


        $("#alert_1_btn").on('click', function() {


            $("#alert_direct").val($(this).data("alert-direct"))
            $("#alert_broker").val($(this).data("alert-broker"))
            $("#alert_fantasy").val($(this).data("alert-fantasy"))
            $("#alert_lane_id").val($(this).data("alert-lane-id"))


            $("#btn_tocado").val("alert_1_btn")
            $("#alert_modal").modal('show')
        })

        $("#alert_1_broker_btn").on('click', function() {

            $("#alert_direct").val($(this).data("alert-direct"))
            $("#alert_broker").val($(this).data("alert-broker"))
            $("#alert_fantasy").val($(this).data("alert-fantasy"))
            $("#alert_lane_id").val($(this).data("alert-lane-id"))

            $("#btn_tocado").val("alert_1_broker_btn")
            $("#alert_modal").modal('show')
        })

        $("#alert_2_btn").on('click', function() {

            $("#alert_direct").val($(this).data("alert-direct"))
            $("#alert_broker").val($(this).data("alert-broker"))
            $("#alert_fantasy").val($(this).data("alert-fantasy"))
            $("#alert_lane_id").val($(this).data("alert-lane-id"))

            $("#btn_tocado").val("alert_2_btn")
            $("#alert_modal").modal('show')
        })

        $("#alert_2_broker_btn").on('click', function() {

            $("#alert_direct").val($(this).data("alert-direct"))
            $("#alert_broker").val($(this).data("alert-broker"))
            $("#alert_fantasy").val($(this).data("alert-fantasy"))
            $("#alert_lane_id").val($(this).data("alert-lane-id"))

            $("#btn_tocado").val("alert_2_broker_btn")
            $("#alert_modal").modal('show')
        })

        $("#alert_3_btn").on('click', function() {

            $("#alert_direct").val($(this).data("alert-direct"))
            $("#alert_broker").val($(this).data("alert-broker"))
            $("#alert_fantasy").val($(this).data("alert-fantasy"))
            $("#alert_lane_id").val($(this).data("alert-lane-id"))

            $("#btn_tocado").val("alert_3_btn")
            $("#alert_modal").modal('show')
        })

        $("#alert_3_broker_btn").on('click', function() {

            $("#alert_direct").val($(this).data("alert-direct"))
            $("#alert_broker").val($(this).data("alert-broker"))
            $("#alert_fantasy").val($(this).data("alert-fantasy"))
            $("#alert_lane_id").val($(this).data("alert-lane-id"))

            $("#btn_tocado").val("alert_3_broker_btn")
            $("#alert_modal").modal('show')
        })


        $(".set_alert_btn").on('click', function() {
            var cual = $("#btn_tocado").val()
            var myButton = $('#' + cual);

            // Change the text of the button
            myButton.text('Alert Set');

            // Remove the old button class and add the new one
            myButton.removeClass('btn-success');
            myButton.addClass('btn-secondary');

            var alert_valor = $("#alert_valor").val()
            var alert_email = $("#alert_email").val()
            var alert_direct = $("#alert_direct").val()
            var alert_broker = $("#alert_broker").val()
            var alert_fantasy = $("#alert_fantasy").val()
            var alert_lane_id = $("#alert_lane_id").val()

            $.ajax({
                url: 'seteo_alert.php',
                type: 'POST',
                data: {
                    alert_valor: alert_valor,
                    alert_email: alert_email,
                    alert_direct: alert_direct,
                    alert_broker: alert_broker,
                    alert_fantasy: alert_fantasy,
                    alert_lane_id: alert_lane_id
                },
                success: function(data) {
                    // Replace the content of a div with the parsed data
                    console.log(data)
                },
                error: function() {
                    // Handle error if the AJAX request fails
                    console.log('Error occurred while fetching JSON data');
                }
            });


            $("#alert_modal").modal('hide')

        })


        // #search_1_btn
        var button = document.querySelector("#search_1_btn");
        // Handle button click event
        button.addEventListener("click", function() {
            // Activate indicator
            button.setAttribute("data-kt-indicator", "on");
            // Disable indicator after 7 seconds
            setTimeout(function() {
                button.removeAttribute("data-kt-indicator");
            }, 7000);
        });
        $("#search_1_btn").on('click', function() {
            var origin_1 = $("#origin_1").val()
            var destination_1 = $("#destination_1").val()
            var equipment_1 = $("#equipment_1").val()
            if (origin_1 !== '' && destination_1 !== '' && equipment_1 !== '') {
                send_rate_request(origin_1, destination_1, equipment_1, 1)
                //$('#search_1_btn').prop('disabled', true);
                //startFlashing(1)
            }
        })

        // #search_2_btn
        var button2 = document.querySelector("#search_2_btn");
        // Handle button click event
        button2.addEventListener("click", function() {
            // Activate indicator
            button2.setAttribute("data-kt-indicator", "on");
            // Disable indicator after 7 seconds
            setTimeout(function() {
                button2.removeAttribute("data-kt-indicator");
            }, 7000);
        });
        $("#search_2_btn").on('click', function() {
            var origin_2 = $("#origin_2").val()
            var destination_2 = $("#destination_2").val()
            var equipment_2 = $("#equipment_2").val()
            if (origin_2 !== '' && destination_2 !== '' && equipment_2 !== '') {
                send_rate_request(origin_2, destination_2, equipment_2, 2)
                //$('#search_2_btn').prop('disabled', true);
                //startFlashing(2)
            }
        })

        // #search_3_btn
        var button3 = document.querySelector("#search_3_btn");
        // Handle button click event
        button3.addEventListener("click", function() {
            // Activate indicator
            button3.setAttribute("data-kt-indicator", "on");
            // Disable indicator after 7 seconds
            setTimeout(function() {
                button3.removeAttribute("data-kt-indicator");
            }, 7000);
        });
        $("#search_3_btn").on('click', function() {
            var origin_3 = $("#origin_3").val()
            var destination_3 = $("#destination_3").val()
            var equipment_3 = $("#equipment_3").val()
            if (origin_3 !== '' && destination_3 !== '' && equipment_3 !== '') {
                send_rate_request(origin_3, destination_3, equipment_3, 3)
                //$('#search_3_btn').prop('disabled', true);
                //startFlashing(3)
            }
        })


        const resultados_charts = {
            col: []

        }
        resultados_charts.col[1] = []
        resultados_charts.col[1][5] = []
        resultados_charts.col[1][30] = []
        resultados_charts.col[1][180] = []
        resultados_charts.col[1][365] = []

        resultados_charts.col[2] = []
        resultados_charts.col[2][5] = []
        resultados_charts.col[2][30] = []
        resultados_charts.col[2][180] = []
        resultados_charts.col[2][365] = []

        resultados_charts.col[3] = []
        resultados_charts.col[3][5] = []
        resultados_charts.col[3][30] = []
        resultados_charts.col[3][180] = []
        resultados_charts.col[3][365] = []


        function send_rate_request(origin, destination, equipment, col) {

            var data = {
                origin: origin,
                destination: destination,
                equipment: equipment
            }

            $.ajax({
                url: 'ajax/make_quote.php',
                dataType: 'json',
                type: 'POST',
                data: data,
                success: function(data) {




                    console.log(data)
                    var este_valor

                    resultados_charts.col[col][5].length = 0
                    resultados_charts.col[col][30].length = 0
                    resultados_charts.col[col][180].length = 0
                    resultados_charts.col[col][365].length = 0

                    data.days_5_result.forEach(function(d5d) {
                        resultados_charts.col[col][5].push({
                            "x": d5d.fecha,
                            "y": d5d.valor
                        })
                    });

                    data.days_30_result.forEach(function(d30d) {
                        if (d30d.valor === null) {
                            este_valor = 0
                        } else {
                            este_valor = parseFloat(d30d.valor)
                        }

                        resultados_charts.col[col][30].push({
                            "x": d30d.fecha,
                            "y": este_valor
                        })
                    });

                    data.days_180_result.forEach(function(d180d) {
                        if (d180d.valor === null) {
                            este_valor = 0
                        } else {
                            este_valor = parseFloat(d180d.valor)
                        }
                        resultados_charts.col[col][180].push({
                            "x": d180d.fecha,
                            "y": este_valor
                        })
                    });

                    data.days_365_result.forEach(function(d7d) {
                        if (d7d.valor === null) {
                            este_valor = 0
                        } else {
                            este_valor = parseFloat(d7d.valor)
                        }
                        resultados_charts.col[col][365].push({
                            "x": d7d.fecha,
                            "y": este_valor
                        })
                    });


                    armo_chart(col)



                    $("#slider_broker_div_" + col).text('$' + data.slider_min_broker + '-  $' + data.slider_max_broker)
                    $("#fantasy_name_div_" + col).text(data.fantasy_name)
                    $("#rpm_div_" + col).text(data.rpm_carrier + "RPM")
                    $("#distance_div_" + col).text(data.distance + " mi")
                    $("#carrier_div_" + col).text(data.carrier)

                    $("#slider_carrier_div_" + col).text('$' + data.slider_min_carrier + '-  $' + data.slider_max_carrier)
                    $("#fantasy_name_div_broker_" + col).text(data.fantasy_name)
                    $("#rpm_div_broker_" + col).text(data.rpm_shipper + "/mi")
                    $("#distance_div_broker_" + col).text(data.distance + " mi")
                    $("#broker_div_" + col).text(data.shipper)



                    $("#res_div_" + col).css('display', 'block')

                    $("#btn_enlarge_" + col).attr('data-fantasy-name', data.fantasy_name);
                    $("#btn_enlarge_" + col).attr('data-last-updated', 'Last updated:' + data.last_updated);
                    $("#btn_enlarge_" + col).attr('data-rpm', data.rpm_carrier + "/mi");
                    $("#btn_enlarge_" + col).attr('data-distance', data.distance + " mi");
                    $("#btn_enlarge_" + col).attr('data-direct-quote', data.carrier);
                    $("#btn_enlarge_" + col).attr('data-direct-porcentaje', '9,52%');
                    $("#btn_enlarge_" + col).attr('data-fair-quote', data.shipper);

                    $("#btn_enlarge_" + col).attr('data-slider-broker', '$' + data.slider_min_broker + '-  $' + data.slider_max_broker);
                    $("#btn_enlarge_" + col).attr('data-slider-direct', '$' + data.slider_min_carrier + '-  $' + data.slider_max_carrier);



                    $('.cual_es_' + col).data('lane', data.lane_id);

                    //    data-alert-fantasy="" data-alert-direct="" data-alert-broker="" data-alert-lane="" id="alert_<?php echo $i; ?>_btn"

                    $("#alert_" + col + "_btn").data("alert-fantasy", data.fantasy_name)
                    $("#alert_" + col + "_btn").data("alert-direct", data.carrier)
                    $("#alert_" + col + "_btn").data("alert-broker", data.shipper)
                    $("#alert_" + col + "_btn").data("alert-lane-id", data.lane_id)



                    var is_spotter_text
                    if (parseInt(data.is_spotter) === 0) {
                        is_spotter_text = "AI Learning Mode"

                        $('.tooltip_spot_on_ai_' + col).css('display', 'block')
                        $('.tooltip_spot_on_le_' + col).css('display', 'none')

                        $(".do_you_want_div_" + col).css('display', 'block')

                    } else {
                        is_spotter_text = "Spot Market \n Spot on !"

                        $('.tooltip_spot_on_ai_' + col).css('display', 'none')
                        $('.tooltip_spot_on_le_' + col).css('display', 'block')

                        //$('.tooltip_spot_on_' + col).attr('title', 'This lane has already been learned by our Spot Market, Spot On AI algorithm.');
                        //$('.tooltip_spot_on_' + col).prop('title', 'This lane has already been learned by our Spot Market, Spot On AI algorithm.');
                        $(".do_you_want_div_" + col).css('display', 'none')
                    }
                    $(".is_spotter_div_" + col).text(is_spotter_text)

                    $('#search_' + col + '_btn').prop('disabled', false);
                    stopFlashing(col)



                    // Wait for 2 seconds (2000 milliseconds) and then trigger the function
                    setTimeout(re_armo_search(), 2000);


                },
                error: function() {
                    alert('Please check every field.');
                    stopFlashing(col)

                }
            });


        }

        function re_armo_search() {
            console.log("aca")
            $.ajax({
                url: 'add_1_history_lane.php',
                type: 'GET',
                success: function(data) {
                    // Replace the content of a div with the parsed data
                    $('#search_history_div').html(data);
                },
                error: function() {
                    // Handle error if the AJAX request fails
                    console.log('Error occurred while fetching JSON data');
                }
            });
        }



        let intervalId

        function startFlashing(col) {
            intervalId = setInterval(function() {
                $('#search_' + col + '_btn').fadeOut(500).fadeIn(500);
            }, 1000);
        }

        function stopFlashing(col) {
            clearInterval(intervalId);
            $('#search_' + col + '_btn').stop().fadeIn().show();
            //$('#search_' + col + '_btn').addClass('btn-primary')
        }


        document.addEventListener("DOMContentLoaded", function() {
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const myParam = urlParams.get('sec');
            const myEq = urlParams.get('eq');
            var equipment

            if (myEq === "1") {
                equipment = 'reefer'
            }
            if (myEq === "3") {
                equipment = 'flat'
            }
            if (myEq === "2") {
                equipment = 'van'
            }

            if (myParam) {
                $.ajax({
                    url: 'ajax/traigo_section.php?sec=' + myParam,
                    dataType: 'json',
                    success: function(data) {
                        $("#origin_1").val(data.origin)
                        $("#destination_1").val(data.destination)
                        $("#equipment_1").val(equipment)
                        const myButton = document.getElementById('search_1_btn');
                        myButton.click();

                    },
                    error: function() {
                        alert('Please refresh page.');
                    }
                });
            }
        });


        function actualizo_chart(col, rango) {
            if (col === 1) {
                chart_search_result_1.updateSeries([{
                    name: 'Rate',
                    data: resultados_charts.col[col][rango]
                }])
            }

            if (col === 2) {
                chart_search_result_2.updateSeries([{
                    name: 'Rate',
                    data: resultados_charts.col[col][rango]
                }])
            }

            if (col === 3) {
                chart_search_result_3.updateSeries([{
                    name: 'Rate',
                    data: resultados_charts.col[col][rango]
                }])
            }


        }


        function chart_modal(rango) {

            chart_search_result_4.updateSeries([{
                name: 'Rate',
                data: resultados_charts.col[modal_mirando_chart.cual][rango]
            }])

        }


        function armo_chart(col) {

            if (col === 1) {
                chart_search_result_1.updateSeries([{
                    name: 'Rate',
                    data: resultados_charts.col[col][5]
                }])
            }

            if (col === 2) {
                chart_search_result_2.updateSeries([{
                    name: 'Rate',
                    data: resultados_charts.col[col][5]
                }])
            }

            if (col === 3) {
                chart_search_result_3.updateSeries([{
                    name: 'Rate',
                    data: resultados_charts.col[col][5]
                }])
            }

        }


        $('.js-typeahead-country_v1').typeahead({
            offset: true,
            input: '.js-typeahead-country_v1',
            hint: true,
            source: {
                data: [
                    <?php
                    foreach ($all_c as $v) {
                    ?> "<?php echo $v->city; ?>",
                    <?php
                    }
                    ?>
                ]
            },
            callback: {
                onInit: function(node) {
                    console.log('Typeahead Initiated on ' + node.selector);
                }
            }
        });


        //begin chart
        var element = document.getElementById('chart_search_result_1');
        var height = parseInt(KTUtil.css(element, 'height'));
        var element2 = document.getElementById('chart_search_result_2');
        var element3 = document.getElementById('chart_search_result_3');
        var element4 = document.getElementById('chart_search_result_4');


        var labelColor = KTUtil.getCssVariableValue('--kt-gray-500');
        var borderColor = KTUtil.getCssVariableValue('--kt-gray-200');
        var baseColor = KTUtil.getCssVariableValue('--kt-info');
        var lightColor = KTUtil.getCssVariableValue('--kt-info-light');

        var options_todos_los_charts = {
            series: [],
            chart: {
                height: 300,
                fontFamily: 'inherit',
                type: 'area',
                height: height,
                toolbar: {
                    show: false
                }
            },
            plotOptions: {},
            legend: {
                show: false
            },
            dataLabels: {
                enabled: false
            },
            fill: {
                type: 'solid',
                opacity: 1
            },
            stroke: {
                curve: 'smooth',
                show: true,
                width: 3,
                colors: [baseColor]
            },
            xaxis: {

                axisBorder: {
                    show: false
                },
                axisTicks: {
                    show: false
                },
                labels: {
                    style: {
                        colors: labelColor,
                        fontSize: '12px'
                    }
                },
                crosshairs: {
                    position: 'front',
                    stroke: {
                        color: baseColor,
                        width: 1,
                        dashArray: 3
                    }
                },
                tooltip: {
                    enabled: true,
                    formatter: undefined,
                    offsetY: 0,
                    style: {
                        fontSize: '12px'
                    }
                }
            },
            yaxis: {
                labels: {
                    style: {
                        colors: labelColor,
                        fontSize: '12px'
                    },
                    formatter: function(val) {
                        return "$" + val.toString();
                    }
                }
            },
            states: {
                normal: {
                    filter: {
                        type: 'none',
                        value: 0
                    }
                },
                hover: {
                    filter: {
                        type: 'none',
                        value: 0
                    }
                },
                active: {
                    allowMultipleDataPointsSelection: false,
                    filter: {
                        type: 'none',
                        value: 0
                    }
                }
            },
            tooltip: {
                style: {
                    fontSize: '12px'
                },
                y: {
                    formatter: function(val) {
                        return '$' + val
                    }
                }
            },
            colors: [lightColor],
            grid: {
                borderColor: borderColor,
                strokeDashArray: 4,
                yaxis: {
                    lines: {
                        show: true
                    }
                }
            },
            markers: {
                strokeColor: baseColor,
                strokeWidth: 3
            },
            noData: {
                text: 'Loading...'
            }
        };


        var options_todos_los_charts_modal = {
            series: [],
            chart: {
                height: height,
                fontFamily: 'inherit',
                type: 'area',
                toolbar: {
                    show: false
                }
            },
            plotOptions: {},
            legend: {
                show: false
            },
            dataLabels: {
                enabled: false
            },
            fill: {
                type: 'solid',
                opacity: 1
            },
            stroke: {
                curve: 'smooth',
                show: true,
                width: 3,
                colors: [baseColor]
            },
            xaxis: {

                axisBorder: {
                    show: false
                },
                axisTicks: {
                    show: false
                },
                labels: {
                    style: {
                        colors: labelColor,
                        fontSize: '12px'
                    }
                },
                crosshairs: {
                    position: 'front',
                    stroke: {
                        color: baseColor,
                        width: 1,
                        dashArray: 3
                    }
                },
                tooltip: {
                    enabled: true,
                    formatter: undefined,
                    offsetY: 0,
                    style: {
                        fontSize: '12px'
                    }
                }
            },
            yaxis: {
                labels: {
                    style: {
                        colors: labelColor,
                        fontSize: '12px'
                    },
                    formatter: function(val) {
                        return "$" + val.toString();
                    }
                }
            },
            states: {
                normal: {
                    filter: {
                        type: 'none',
                        value: 0
                    }
                },
                hover: {
                    filter: {
                        type: 'none',
                        value: 0
                    }
                },
                active: {
                    allowMultipleDataPointsSelection: false,
                    filter: {
                        type: 'none',
                        value: 0
                    }
                }
            },
            tooltip: {
                style: {
                    fontSize: '12px'
                },
                y: {
                    formatter: function(val) {
                        return '$' + val
                    }
                }
            },
            colors: [lightColor],
            grid: {
                borderColor: borderColor,
                strokeDashArray: 4,
                yaxis: {
                    lines: {
                        show: true
                    }
                }
            },
            markers: {
                strokeColor: baseColor,
                strokeWidth: 3
            },
            noData: {
                text: 'Loading...'
            }
        };

        var chart_search_result_1 = new ApexCharts(document.querySelector("#chart_search_result_1"), options_todos_los_charts);
        chart_search_result_1.render();

        var chart_search_result_2 = new ApexCharts(document.querySelector("#chart_search_result_2"), options_todos_los_charts);
        chart_search_result_2.render();

        var chart_search_result_3 = new ApexCharts(document.querySelector("#chart_search_result_3"), options_todos_los_charts);
        chart_search_result_3.render();

        var chart_search_result_4 = new ApexCharts(document.querySelector("#chart_search_result_4"), options_todos_los_charts_modal);
        chart_search_result_4.render();


        var inactivityTimeLimit = 3600000;
        var inactivityTimer;

        function startInactivityTimer() {
            inactivityTimer = setTimeout(logOutUser, inactivityTimeLimit);
        }

        function resetInactivityTimer() {
            clearTimeout(inactivityTimer);
            startInactivityTimer();
        }

        function logOutUser() {
            window.location.href = "log_out.php";
        }

        $(document).ready(function() {
            startInactivityTimer();
        });
        $(document).on("mousemove keypress mousedown touchstart", function() {
            resetInactivityTimer();
        });
    </script>


</body>
<!--end::Body-->

</html>





<!-- sabry prueba-->
<?php
error_reporting(0);
include("login_check.php");
include("config.php");
include("../class/class_customer.php");
?>
<!DOCTYPE html>
<html lang="en">

<!--begin::Body-->
<body data-kt-name="good" id="kt_app_body" data-kt-app-layout="light-sidebar" data-kt-app-sidebar-enabled="true" data-kt-app-sidebar-fixed="true" data-kt-app-sidebar-push-header="true" data-kt-app-sidebar-push-toolbar="true" data-kt-app-sidebar-push-footer="true" class="app-default">

            <!--begin::Tap pane ------ My Profile  ------->
            <div class="tab-pane fade show active" id="kt_list_widget_10_tab_1">
                <!--begin::Item-->
                <div class="m-0">
                    <!--begin::Basic info-->                                                
                    <h3 class="fw-bold m-0">Profile Details</h3>                                                      
                        <!--begin::Content-->
                        <div id="kt_account_settings_profile_details" class="collapse show">
                            <!--begin::Form-->
                            <form id="kt_account_profile_details_form" class="form">
                                <!--begin::Card body-->
                                <div class="card-body border-top p-9">
                                    <!--begin::Input group-->
                                    <div class="row mb-6">
                                        <!--begin::Label-->
                                        <label class="col-lg-4 col-form-label fw-semibold fs-6">Avatar</label>
                                        <!--end::Label-->
                                        <!--begin::Col-->
                                        <div class="col-lg-8">
                                            <!--begin::Image input-->
                                            <div class="image-input image-input-outline" data-kt-image-input="true" style="background-image: url('assets/media/svg/avatars/blank.svg')">
                                                <!--begin::Preview existing avatar-->
                                                <div class="image-input-wrapper w-125px h-125px" style="background-image: url(assets/media/avatars/300-1.jpg)"></div>
                                                <!--end::Preview existing avatar-->
                                                <!--begin::Label-->
                                                <label class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="change" data-bs-toggle="tooltip" title="Change avatar">
                                                    <i class="bi bi-pencil-fill fs-7"></i>
                                                    <!--begin::Inputs-->
                                                    <input type="file" name="avatar" accept=".png, .jpg, .jpeg" />
                                                    <input type="hidden" name="avatar_remove" />
                                                    <!--end::Inputs-->
                                                </label>
                                                <!--end::Label-->
                                                <!--begin::Cancel-->
                                                <span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="cancel" data-bs-toggle="tooltip" title="Cancel avatar">
                                                    <i class="bi bi-x fs-2"></i>
                                                </span>
                                                <!--end::Cancel-->
                                                <!--begin::Remove-->
                                                <span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="remove" data-bs-toggle="tooltip" title="Remove avatar">
                                                    <i class="bi bi-x fs-2"></i>
                                                </span>
                                                <!--end::Remove-->
                                            </div>
                                            <!--end::Image input-->
                                            <!--begin::Hint-->
                                            <div class="form-text">Allowed file types: png, jpg, jpeg.</div>
                                            <!--end::Hint-->
                                        </div>
                                        <!--end::Col-->
                                    </div>
                                    <!--end::Input group-->

                                    <!--begin::Email Address-->
                                    <div class="d-flex flex-wrap align-items-center">
                                        <!--begin::Label-->
                                        <div id="kt_signin_email">
                                            <div class="fs-6 fw-bold mb-1">Email Address</div>
                                            <div class="fw-semibold text-gray-600"><?php echo $_SESSION['customer']->customer_email;?></div>
                                        </div>
                                        <!--end::Label-->
                                        <!--begin::Edit-->
                                        <div id="kt_signin_email_edit" class="flex-row-fluid d-none">
                                            <!--begin::Form-->
                                            <form id="kt_signin_change_email" class="form" novalidate="novalidate">
                                                <div class="row mb-6">
                                                    <div class="col-lg-6 mb-4 mb-lg-0">
                                                        <div class="fv-row mb-0">
                                                            <label for="emailaddress" class="form-label fs-6 fw-bold mb-3">Enter New Email Address</label>
                                                            <input type="email" class="form-control form-control-lg form-control-solid" id="emailaddress" placeholder="Email Address" name="emailaddress" value="support@lanerunner.com" />
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6">
                                                        <div class="fv-row mb-0">
                                                            <label for="confirmemailpassword" class="form-label fs-6 fw-bold mb-3">Confirm Password</label>
                                                            <input type="password" class="form-control form-control-lg form-control-solid" name="confirmemailpassword" id="confirmemailpassword" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="d-flex">
                                                    <button id="kt_signin_submit" type="button" class="btn btn-primary me-2 px-6">Update Email</button>
                                                    <button id="kt_signin_cancel" type="button" class="btn btn-color-gray-400 btn-active-light-primary px-6">Cancel</button>
                                                </div>
                                            </form>
                                            <!--end::Form-->
                                        </div>
                                        <!--end::Edit-->
                                        <!--begin::Action-->
                                        <div id="kt_signin_email_button" class="ms-auto">
                                            <button class="btn btn-light btn-active-light-primary">Change Email</button>
                                        </div>
                                        <!--end::Action-->
                                    </div>
                                    <!--end::Email Address-->
                                    <!--begin::Separator-->
                                    <div class="separator separator-dashed my-6"></div>
                                    <!--end::Separator-->
                                    <!--begin::Password-->
                                    <div class="d-flex flex-wrap align-items-center mb-10">
                                        <!--begin::Label-->
                                        <div id="kt_signin_password">
                                            <div class="fs-6 fw-bold mb-1">Password</div>
                                            <div class="fw-semibold text-gray-600">************</div>
                                        </div>
                                        <!--end::Label-->
                                        <!--begin::Edit-->
                                        <div id="kt_signin_password_edit" class="flex-row-fluid d-none">
                                            <!--begin::Form-->
                                            <form id="kt_signin_change_password" class="form" novalidate="novalidate">
                                                <div class="row mb-1">
                                                    <div class="col-lg-4">
                                                        <div class="fv-row mb-0">
                                                            <label for="currentpassword" class="form-label fs-6 fw-bold mb-3">Current Password</label>
                                                            <input type="password" class="form-control form-control-lg form-control-solid" name="currentpassword" id="currentpassword" />
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <div class="fv-row mb-0">
                                                            <label for="newpassword" class="form-label fs-6 fw-bold mb-3">New Password</label>
                                                            <input type="password" class="form-control form-control-lg form-control-solid" name="newpassword" id="newpassword" />
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <div class="fv-row mb-0">
                                                            <label for="confirmpassword" class="form-label fs-6 fw-bold mb-3">Confirm New Password</label>
                                                            <input type="password" class="form-control form-control-lg form-control-solid" name="confirmpassword" id="confirmpassword" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-text mb-5">Password must be at least 8 character and contain symbols</div>
                                                <div class="d-flex">
                                                    <button id="kt_password_submit" type="button" class="btn btn-primary me-2 px-6">Update Password</button>
                                                    <button id="kt_password_cancel" type="button" class="btn btn-color-gray-400 btn-active-light-primary px-6">Cancel</button>
                                                </div>
                                            </form>
                                            <!--end::Form-->
                                        </div>
                                        <!--end::Edit-->
                                        <!--begin::Action-->
                                        <div id="kt_signin_password_button" class="ms-auto">
                                            <button class="btn btn-light btn-active-light-primary">Reset Password</button>
                                        </div>
                                        <!--end::Action-->
                                    </div>
                                    <!--end::Password-->

                                    <!--begin::Input group-->
                                    <div class="row mb-6">
                                        <!--begin::Label-->
                                        <label class="col-lg-4 col-form-label required fw-semibold fs-6">First Name</label>
                                        <!--end::Label-->
                                        <!--begin::Col-->                                                                            
                                        <div class="col-lg-8 fv-row">
                                            <input type="text" id="fname" name="fname" class="form-control form-control-lg form-control-solid mb-3 mb-lg-0" placeholder="First Name" value="<?php echo $_SESSION['customer']->customer_firstName;?>" />
                                        </div>                                                                            
                                        <!--end::Col-->
                                    </div>
                                    <!--end::Input group-->
                                    <!--begin::Input group-->
                                    <div class="row mb-6">
                                        <!--begin::Label-->
                                        <label class="col-lg-4 col-form-label required fw-semibold fs-6">Last Name</label>
                                        <!--end::Label-->
                                        <!--begin::Col-->                                                                            
                                        <div class="col-lg-8 fv-row">
                                            <input type="text" id="lname" name="lname" class="form-control form-control-lg form-control-solid mb-3 mb-lg-0" placeholder="Last Name" value="<?php echo $_SESSION['customer']->customer_lastName;?>" />
                                        </div>                                                                            
                                        <!--end::Col-->
                                    </div>
                                    <!--end::Input group-->
                                    <!--begin::Input group-->
                                    <div class="row mb-6">
                                        <!--begin::Label-->
                                        <label class="col-lg-4 col-form-label fw-semibold fs-6">
                                            <span class="required">Contact Phone</span>
                                            <i class="fas fa-exclamation-circle ms-1 fs-7" data-bs-toggle="tooltip" title="Phone number must be active"></i>
                                        </label>
                                        <!--end::Label-->
                                        <!--begin::Col-->
                                        <div class="col-lg-8 fv-row">
                                            <!--input type="tel" name="phone" class="form-control form-control-lg form-control-solid" placeholder="Phone number" value="044 3276 454 935" /-->
                                            <input type="tel" id="phone" name="phone" class="form-control form-control-lg form-control-solid" placeholder="Phone number" value="<?php echo $_SESSION['customer']->customer_phone;?>" />
                                        </div>
                                        <!--end::Col-->
                                    </div>
                                    <!--end::Input group-->						
                                </div>
                                <!--end::Card body-->
                                <!--begin::Actions-->
                                <div class="card-footer d-flex justify-content-end py-6 px-9">
                                    <button type="reset" class="btn btn-light btn-active-light-primary me-2">Discard</button>
                                    <button type="submit" class="btn btn-primary" id="kt_account_profile_details_submit">Save Changes</button>
                                </div>
                                <!--end::Actions-->
                            </form>
                            <!--end::Form-->
                        </div>
                        <!--end::Content-->                                                                    
                    <!--end::Basic info-->                                                                  
                </div>
                <!--end::Item-->
            </div>
            <!--end::Tap pane-->
    
    <script>
        $(document).ready(function() {
            $('#kt_account_profile_details_form').submit(function(e) {
                e.preventDefault();

                var name = $('#fname').val();
                var lastname = $('#lname').val();
                var phone = $('#phone').val();

                //alert(name +' - '+  email +' - '+  subject +' - '+  phone +' - '+  message);

                if (name.trim() === '' || lastname.trim() === '' || phone.trim() === '') {                    
                    Swal.fire("Oops...", "Something went wrong :(  Please fill in all fields", "error");
                    return;
                }

                $.ajax({
                url: 'settings_save.php',
                data: $(this).serialize(),
                type: 'POST',
                success: function(data) {
                    console.log(data);
                    Swal.fire({
                                    title: 'Thanks!',
                                    text: 'Your information has been saved.',
                                    icon: 'success',
                                    customClass: {
                                                    confirmButton: 'custom-button-class'
                                                 }
                                });
                },
                error: function(data) {
                    Swal.fire("Oops...", "Something went wrong :(", "error");
                }
                });
            });
        });
    </script>

</body>
<!--end::Body-->

</html>